# v0.1.3 Release Notes

**Release Date:** January 17, 2026  
**Status:** âœ… Released

## What's New

### Manual Match Propagation

**Smart duplicate handling for manual matches**

When you manually match a track to a local file, the system now detects if you have duplicate tracks (same ISRC code) and asks if you want to apply the match to all duplicates automatically.

#### CLI Enhancement
- **New `--propagate` flag** for `psm set-match` command
  ```bash
  # Apply match to all tracks with same ISRC
  psm set-match --track-id <id> --file-path <path> --propagate
  ```
- Automatically finds and matches all duplicate tracks in one operation
- Shows count of affected tracks before applying
- Falls back to single-track matching if ISRC not available

#### GUI Enhancement
- **Automatic duplicate detection** when using "Manual Match" button
- **Confirmation dialog** when duplicates detected:
  - Shows count of duplicate tracks with same ISRC
  - User chooses: Apply to all, Single track only, or Cancel
  - Smart UX: Only shows dialog when duplicates exist
- Batch operation applies to all duplicates instantly

#### Use Cases
This feature is particularly helpful when you have:
- Same song on multiple albums (e.g., original + compilation)
- Same track in different playlists
- Remastered versions with same ISRC
- Duplicate entries from playlist syncing

**Before:** Manually match each duplicate individually (tedious)  
**After:** Match once, apply to all duplicates (efficient)

### Bug Fixes

#### GUI Watch Mode Improvements
- **Fixed: Buttons not re-activating when watch mode is disabled**
  - Action buttons are now immediately re-enabled when manually stopping watch mode
  - Proper UI state restoration ensures seamless workflow continuation
  
- **Fixed: Unnecessary data refresh when watch mode ends**
  - Removed redundant database query when stopping watch mode
  - Faster and smoother user experience when toggling watch mode
  - No "Loading tracks" progress dialog on watch mode stop

### Code Quality Improvements

- **Refactored `set_match` function** to reduce complexity
  - Extracted helper functions for better maintainability
  - Reduced cyclomatic complexity from 35 to <15
  - Improved code readability and testability

## Technical Details

### Database Enhancements
- New query method for finding tracks by ISRC
- Optimized duplicate detection using ISRC index
- Batch match creation for propagated matches

### Signal Changes (GUI)
- `on_manual_match_clicked` signal now includes propagate boolean
- Backward compatible with existing manual match flow

## Upgrading from v0.1.2

No breaking changes - this is a feature addition release.

**Quick Steps:**
1. Download new version
2. Extract and run
3. Existing database and configuration work unchanged
4. New propagate feature available immediately

## Known Limitations

- Propagation only works for tracks with ISRC codes
- Tracks without ISRC fall back to single-track matching
- Currently propagates by ISRC only (not by metadata similarity)

## ðŸ™ Thanks

Thanks to all users for feedback and feature requests that drive these improvements!
