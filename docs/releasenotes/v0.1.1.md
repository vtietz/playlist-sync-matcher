# v0.1.1 Release Notes

**Release Date:** October 17, 2025

## What's New

### ðŸŽ¯ Manual Match Override Feature

The headline feature of v0.1.1 is the ability to manually override automatic track-to-file matches. This gives you complete control when the automatic matcher picks the wrong version or when metadata doesn't align.

**CLI Commands:**
- `psm set-match --track-id <id> --file-path <path>` - Manually assign a track to a local file
- `psm set-match --track-id <id> --file-id <file_id>` - Use file ID from library
- `psm remove-match --track-id <id>` - Remove any match (manual or automatic)

**GUI Integration:**
- **Manual Match** button in tracks panel - opens file picker to select local file
- **Remove Match** button - removes existing match (appears when track has a match)
- Both buttons enabled only when a track is selected
- Instant visual feedback with optimistic UI updates (no full refresh needed)

**Features:**
- Manual matches ALWAYS prioritized over automatic matches via SQL ranking
- Files not in library are automatically ingested
- Changes instantly reflected in reports, exports, and watch mode
- Works with both GUI and CLI workflows

**Use Cases:**
- Automatic matcher picked wrong version (live vs studio, remaster, etc.)
- Higher quality file available at different location
- Metadata doesn't match but you know it's correct
- Override fuzzy matching when certain

See [docs/manual-match-feature.md](../manual-match-feature.md) for detailed documentation.

## Performance Improvements

### Optimized GUI Updates
- **Lightweight row patching**: Manual Match and Remove Match actions now update only the affected row instead of reloading all 13K+ tracks
- **DB monitor suppression**: Prevents redundant auto-refreshes during command execution
- **40-100x faster**: Operations that took 1-2 seconds now complete in <50ms

### Button State Management
- Centralized button state logic in `UiStateController`
- Fixed Remove Match button activation after Manual Match
- Improved responsiveness with proper state synchronization

## Bug Fixes

### GUI Stability
- **Fixed Qt model recursion crash**: Replaced `QModelIndex.isValid()` with bounds checking to prevent infinite recursion when loading large track lists
- **Fixed DB monitor null reference**: Added safety checks in QTimer callbacks to handle cleanup scenarios
- **Fixed button states**: Remove Match button now correctly enables/disables based on track match status

### Test Infrastructure
- **Fixed MockDatabase**: Added missing `get_library_file_by_path()` abstract method implementation
- All 538 tests now pass (fixed 6 previously failing tests)

## Documentation Updates

### Streamlined README
- Condensed Manual Match section from 73 to 26 lines for consistency
- Moved detailed examples to CLI reference documentation
- Improved feature section length consistency

### Cleanup
- Removed 7 temporary bug documentation files
- Consolidated into permanent feature documentation

## Technical Details

### Database Schema
- Manual matches stored with `confidence='MANUAL'` and `method='score:MANUAL:manual-selected'`
- SQL ranking ensures `MANUAL` confidence always ranks first: `ORDER BY (CASE WHEN confidence='MANUAL' THEN 1 ELSE 0 END) DESC`

### Architecture Changes
- New `_patch_track_match_state()` helper method for optimistic GUI updates
- Improved separation of concerns in command controller
- Enhanced error handling with proper null checks

## Download Options

### Bundles (Recommended)
Each bundle contains **both** the GUI and the CLI:
- **Windows**: `psm-windows-amd64.zip` â†’ `psm-gui.exe` + `psm-cli.exe`
- **macOS**: `psm-macos-amd64.tar.gz` â†’ `psm-gui` + `psm-cli`
- **Linux**: `psm-linux-amd64.tar.gz` â†’ `psm-gui` + `psm-cli`

### Individual Binaries
For advanced users who prefer separate downloads:
- Windows: `psm-gui-windows-amd64.exe`, `psm-cli-windows-amd64.exe`
- macOS: `psm-gui-macos-amd64`, `psm-cli-macos-amd64`
- Linux: `psm-gui-linux-amd64`, `psm-cli-linux-amd64`

**Note**: The GUI requires the CLI to function. Keep both in the same folder.

## Quick Start

### Using Bundles (Recommended)
1. Download the bundle for your OS (zip for Windows, tar.gz for macOS/Linux)
2. Extract the archive
3. Run the GUI:
   - **Windows**: Double-click `psm-gui.exe`
   - **macOS/Linux**: `chmod +x psm-gui` then `./psm-gui`

## Upgrade Notes

### From v0.1.0
No breaking changes or database migrations required. Simply replace your executables with the new versions.

**What to test after upgrading:**
1. Verify Manual Match button appears in GUI tracks panel
2. Try manual match workflow with a test track
3. Check that Remove Match button enables when track has a match

## Full Changelog

See all commits: https://github.com/vtietz/playlist-sync-matcher/compare/v0.1.0...v0.1.1

## Verification (SHA-256)

After download, verify integrity by comparing SHA-256 checksums shown on the release page with your local files.

## Feedback & Issues

- Report bugs: https://github.com/vtietz/playlist-sync-matcher/issues
- Feature requests: https://github.com/vtietz/playlist-sync-matcher/discussions
- Documentation: https://github.com/vtietz/playlist-sync-matcher/tree/main/docs
